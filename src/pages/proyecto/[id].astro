---
import Layout from "../../layouts/Layout.astro";
import { websites, WebsiteStatus } from "../../data/websites";

export function getStaticPaths() {
  return websites.map((website) => ({
    params: { id: website.id },
    props: { website },
  }));
}

const {
  website: {
    id,
    title,
    image,
    category,
    year,
    short_description,
    long_description,
    extra_long_description,
    href,
    tags,
    status,
    features,
  },
} = Astro.props;
---

<Layout title={`${title} | Proyecto`}>
  <main class="min-h-screen">
    <!-- Back Button -->
    <nav class="fixed top-6 left-6 z-50">
      <a
        href="/"
        class="inline-flex items-center gap-2 px-4 py-2 bg-neutral-900/80 backdrop-blur-sm border border-neutral-700 rounded-full text-white hover:bg-neutral-800 transition-colors"
      >
        <svg
          class="w-4 h-4"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"></path>
        </svg>
        Volver
      </a>
    </nav>

    <!-- Hero -->
    <section class="relative h-[60vh] min-h-[400px]">
      <div class="absolute inset-0">
        <img src={image} alt={title} class="w-full h-full object-cover" />
        <div
          class={`absolute inset-0 bg-gradient-to-t from-neutral-950 via-neutral-950/70 to-transparent`}
        >
        </div>
      </div>

      <div class="absolute bottom-0 left-0 right-0 p-6 md:p-12">
        <div class="max-w-6xl mx-auto">
          <div class="flex flex-wrap items-center gap-3 mb-4">
            <span
              class="px-3 py-1 bg-white/10 backdrop-blur-sm rounded-full text-sm text-white"
            >
              {category}
            </span>
            <span
              class="px-3 py-1 bg-white/10 backdrop-blur-sm rounded-full text-sm text-white"
            >
              {year}
            </span>
          </div>
          <h1 class="text-4xl md:text-6xl font-bold text-white mb-4">
            {title}
          </h1>
          <p class="text-xl text-neutral-300 max-w-2xl">{short_description}</p>
        </div>
      </div>
    </section>

    <!-- Content -->
    <section class="py-16 px-6">
      <div class="max-w-6xl mx-auto">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
          <!-- Main Content -->
          <div class="lg:col-span-2 space-y-12">
            <div>
              <h2 class="text-2xl font-semibold text-white mb-4">
                Sobre el proyecto
              </h2>
              <p class="text-neutral-400 leading-relaxed">{long_description}</p>
              {
                extra_long_description && (
                  <p class="text-neutral-400 leading-relaxed mt-4">
                    {extra_long_description}
                  </p>
                )
              }
            </div>

            <div>
              <h2 class="text-2xl font-semibold text-white mb-4">
                Características
              </h2>
              <ul class="space-y-3">
                {features && features.map((feature) => (
                  <li class="flex items-start gap-3 text-neutral-400">
                    <svg
                      class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M5 13l4 4L19 7"></path>
                    </svg>
                    {feature}
                  </li>
                ))}
              </ul>
            </div>

            <!-- Mockup -->
            <div>
              <h2 class="text-2xl font-semibold text-white mb-4">
                Vista previa
              </h2>
              <div
                class="rounded-2xl overflow-hidden border border-neutral-800 bg-neutral-900"
              >
                <img
                  src={image}
                  alt={`${title} mockup`}
                  class="w-full aspect-video object-cover"
                />
              </div>
            </div>
          </div>

          <!-- Sidebar -->
          <div class="space-y-8">
            <div
              class="bg-neutral-900 rounded-2xl p-6 border border-neutral-800"
            >
              <h3 class="text-lg font-semibold text-white mb-4">Tecnologías</h3>
              <div class="flex flex-wrap gap-2">
                {
                  tags.map((tag) => (
                    <span class="px-3 py-1 bg-neutral-800 rounded-full text-sm text-neutral-300">
                      {tag}
                    </span>
                  ))
                }
              </div>
            </div>

            <div
              class="bg-neutral-900 rounded-2xl p-6 border border-neutral-800"
            >
              <h3 class="text-lg font-semibold text-white mb-4">
                Detalles del proyecto
              </h3>
              <dl class="space-y-4">
                <div>
                  <dt class="text-sm text-neutral-500">Categoría</dt>
                  <dd class="text-white font-medium">{category}</dd>
                </div>
                <div>
                  <dt class="text-sm text-neutral-500">Año</dt>
                  <dd class="text-white font-medium">{year}</dd>
                </div>
                <div>
                  <dt class="text-sm text-neutral-500">Estado</dt>
                  <dd
                    class={`font-medium ${status === WebsiteStatus.ongoing ? "text-yellow-400" : "text-green-400"}`}
                  >
                    {status}
                  </dd>
                </div>
              </dl>
            </div>

            {
              href && (
                <a
                  href={href}
                  target="_blank"
                  class="block w-full py-3 bg-blue-600 hover:bg-blue-700 text-white text-center rounded-full font-medium transition-colors"
                >
                  Ver sitio en vivo
                </a>
              )
            }
          </div>
        </div>
      </div>
    </section>

    <!-- More Projects -->
    <section class="py-16 px-6 bg-neutral-900 border-t border-neutral-800">
      <div class="max-w-6xl mx-auto">
        <h2 class="text-2xl font-semibold text-white mb-8">Otros proyectos</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          {
            websites
              .filter((w) => w.id !== id)
              .sort(() => Math.random() - 0.5)
              .slice(0, 3)
              .map((project) => (
                <a
                  href={`/proyecto/${project.id}`}
                  class="group block bg-neutral-800/50 rounded-xl overflow-hidden border border-neutral-700 hover:border-neutral-600 transition-colors"
                >
                  <img
                    src={project.image}
                    alt={project.title}
                    class="w-full aspect-video object-cover group-hover:scale-105 transition-transform duration-300"
                  />
                  <div class="p-4">
                    <h3 class="font-semibold text-white group-hover:text-blue-400 transition-colors">
                      {project.title}
                    </h3>
                    <p class="text-sm text-neutral-400">{project.category}</p>
                  </div>
                </a>
              ))
          }
        </div>
      </div>
    </section>
  </main>
</Layout>
